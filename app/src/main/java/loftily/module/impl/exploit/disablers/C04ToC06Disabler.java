package loftily.module.impl.exploit.disablers;

import loftily.event.impl.packet.PacketSendEvent;
import loftily.handlers.impl.player.RotationHandler;
import loftily.module.impl.exploit.Disabler;
import loftily.utils.client.PacketUtils;
import loftily.value.impl.mode.Mode;
import net.lenni0451.lambdaevents.EventHandler;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;

public class C04ToC06Disabler extends Mode<Disabler> {
    public C04ToC06Disabler() {
        super("C04=>C06");
    }

    @EventHandler
    public void onPacketSend(PacketSendEvent event) {
        Packet<?> packet = event.getPacket();
        if (packet instanceof CPacketPlayer.Position) {
            event.setCancelled(true);
            CPacketPlayer.Position position = ((CPacketPlayer.Position) packet);
            PacketUtils.sendPacket(new CPacketPlayer.PositionRotation(position.x, position.y, position.z, RotationHandler.getCurrentRotation().yaw, RotationHandler.getCurrentRotation().pitch, position.onGround));
        }
    }
}
