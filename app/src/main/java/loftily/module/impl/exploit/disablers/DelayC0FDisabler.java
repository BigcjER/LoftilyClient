package loftily.module.impl.exploit.disablers;

import loftily.event.impl.packet.PacketSendEvent;
import loftily.module.impl.exploit.Disabler;
import loftily.value.impl.NumberValue;
import loftily.value.impl.mode.Mode;
import net.lenni0451.lambdaevents.EventHandler;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketConfirmTransaction;

public class DelayC0FDisabler extends Mode<Disabler> {
    private final NumberValue amounts = new NumberValue("DelayC0F-Amounts",700,0,5000);

    public DelayC0FDisabler() {
        super("DelayC0F");
    }

    @EventHandler
    public void onPacketSend(PacketSendEvent event) {
        Packet<?> packet = event.getPacket();
        if(packet instanceof CPacketConfirmTransaction){
            ((CPacketConfirmTransaction) packet).setUid((short) (((CPacketConfirmTransaction) packet).getUid()-amounts.getValue().intValue()));
        }
    }
}
