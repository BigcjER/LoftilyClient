package loftily.module.impl.exploit.disablers;

import loftily.event.impl.packet.PacketSendEvent;
import loftily.module.impl.exploit.Disabler;
import loftily.utils.client.PacketUtils;
import loftily.value.impl.mode.Mode;
import net.lenni0451.lambdaevents.EventHandler;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;

public class C06ToC04Disabler extends Mode<Disabler> {
    public C06ToC04Disabler() {
        super("C06=>C04");
    }
    
    @EventHandler
    public void onPacketSend(PacketSendEvent event) {
        Packet<?> packet = event.getPacket();
        if (packet instanceof CPacketPlayer.PositionRotation) {
            event.setCancelled(true);
            PacketUtils.sendPacket(new CPacketPlayer.Position(((CPacketPlayer.PositionRotation) packet).x,
                    ((CPacketPlayer.PositionRotation) packet).y,
                    ((CPacketPlayer.PositionRotation) packet).z,
                    ((CPacketPlayer.PositionRotation) packet).onGround));
        }
    }
}
