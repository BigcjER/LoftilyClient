package loftily.module.impl.exploit.disablers;

import loftily.event.impl.world.LivingUpdateEvent;
import loftily.module.impl.exploit.Disabler;
import loftily.utils.client.PacketUtils;
import loftily.value.impl.NumberValue;
import loftily.value.impl.mode.Mode;
import net.lenni0451.lambdaevents.EventHandler;
import net.minecraft.network.play.client.CPacketEntityAction;

public class FallFlyingDisabler extends Mode<Disabler> {
    private final NumberValue delay = new NumberValue("FallFlying-Delay", 3, 1, 10);

    public FallFlyingDisabler() {
        super("FallFlying");
    }

    @EventHandler
    public void onLivingUpdate(LivingUpdateEvent event) {
        if (mc.player.ticksExisted % delay.getValue() == 0) {
            PacketUtils.sendPacket(new CPacketEntityAction(mc.player, CPacketEntityAction.Action.START_FALL_FLYING));
        }
    }
}
